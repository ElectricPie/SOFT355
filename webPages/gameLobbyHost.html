<body>
    <div style="text-align: center;"">
        <h1 id="lobbyCode">Lobby: [lobby code]</h1>   
        
        <button type="button" id="startGame">Start Game</button>
        <h2>Player List</h2>   
        <ul style="list-style-type:none;" id="playerList">

        </ul>
    </div>
    
    <script>     


        socket.on('players', function(data) {
            $("#playerList").empty();

            var playerList = JSON.parse(data.players);

            for (let i = 0; i < playerList.length; i++) {
                $("#playerList").append("<li>" + playerList[i] + "</li>")
                console.log(i + ": " + playerList[i]);
            }
        });

        //Recive data from socket
        socket.on('lobbies', function (data) {
            //Get lobby code from server
            if (data.type == "code") {
                lobbyCode = data.lobbyCode
                localStorage.setItem('lobbyCode', lobbyCode);
                //Replace lobby code with generated code
                $("#lobbyCode").html('Lobby: ' + lobbyCode);
            }
        });

        socket.on('startGame', function (data) {
            $.get("/startGame", function (data, status) {
                $("body").html(data);
            }); 
        });

        $("#startGame").on("click", function() {
            socket.emit('start', { lobbyCode: lobbyCode });
        });
        
    </script>
</body>

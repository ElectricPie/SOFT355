<body>
    <div style="clear: both" style="text-align: center">
        <h1 style="float: left">Lobby:</h1>
        <h1 style="float: left" id="lobbyCode">[lobby code]</h1>
    </div>
    
    
    <h2>Player List</h2>   
    <ul id="playerList">

    </ul>
    
    <script>
        var lobbyCode = localStorage.getItem('lobbyCode') ;

        if(lobbyCode != null) {
            $("#lobbyCode").html(lobbyCode);
            //Gets the server to send player list
            socket.emit('request update', { lobbyCode: lobbyCode });
        }
        
        socket.on('players', function(data) {
            $("#playerList").empty();

            var playerList = JSON.parse(data.players);

            for (let i = 0; i < playerList.length; i++) {
                $("#playerList").append("<li>" + playerList[i] + "</li>")
                console.log(i + ": " + playerList[i]);
            }
        });

        //Recive data from socket
        socket.on('lobbies', function (data) {
            //Get lobby code from server
            if (data.type == "code") {
                //Replace lobby code with generated code
                $("#lobbyCode").html(data.lobbyCode);
            }
        });
    </script>
</body>

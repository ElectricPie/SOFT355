<body>
    <h1>Join Page</h1>

    <h2>Avalible Lobbies</h2>
    <ui id="lobbyList">
            
    </ui>
      
    <script>
        socket.on('lobby search', function (data) {
            $("#lobbyList").empty();

            var lobbies = JSON.parse(data.lobbies); 

            for (let i = 0; i < data.lobbyCount; i++) {
                //Create a new list items with the lobby code, number of players and a button to join.
                $("#lobbyList").append("<li>" + lobbies[i] + " | " + (data.playerCount[i] + 1) + "/5 <button type=\"button\" id=\"" + lobbies[i] + "\">Join</button></li>")
            }

            $("button").on( "click", function() {
                //Request to join the given lobbys room
                socket.emit('join room', { room: "existingLobby", lobbyCode: this.id });
                $.get("/joinGame", function(data, status) {
                    $("body").html(data);
                });
            });
        });
    </script>
</body>